sudo: required
dist: trusty
group: edge

language: node_js

os:
  - linux

node_js:
  - '6'
  - '5'
  - '4'

before_install:
  - npm install -g npm
  - npm --version

after_success:
  - npm run coveralls
  - npm run coverage-clean

before_deploy:
  - echo "Deploying to GitHub releases"
  - ls -al releases

deploy:
  provider: releases
  api_key:
    secure: "Ng12PTa+BQW/5udH+Ls+A3bxO0LosCF5mK1epZZhagX1V6rAVbBcF3BBHte0RFBVMnvzWCQsTQonpGse9fhceHdYFXCitSG0Q8L4UyU7QLF3eifAE2rCIaz/1X/p71Uo/ezGk883boM4r8xue5upxMdj3PsjbGg+NyoZKrviOCX7rJdHPEBTqu+kUaOWymJh7hI7UzwdeMWVfUjKmgAGzxzcB9lzGKX7JVw+UJqdJKxhE3ln31JzYOyW/5y4VmPGQ8Y4n0VzkWKRu10MSMaGf+hRPgr2guYDua5NrGVcW/CPx9qMazGDaxov7BrCh8ovhsaxZDgZUPLDgOvs7vp3MiiK8nNStnS7HWv9a9NNiSeNJEcBJhN7G+drbbpWKr+guowqgKdWvfmZgHVPnt+pg50a97hjeG2tYRO8V9Qc4Fcd9HReiZm3/m5Ve6buEtnlneG+FYLj/i89yb1P0D4CSiBru5yGdDrv5zCjxo0hHrRi9fDY66bxl+Z5dWmPhNho2RMEk6cRc37sN0Z6FN4sCiebKWhWU6qP9p0Um8bQbcaTF6/VoKD8YmmzejQQyGibdmyWFJLtFWgQfKjR7KkVtJ8ubOwDlZZxsZgr+qJqPfZBC2uI+YNp82Ji0CwQHz++Iv5yt4vJBsI+l15981sehKtEIZ5YIZ+5b63Loua2bR0="
  file_glob: true
  file:
    - 'releases/*.*'
  overwrite: true
  skip_cleanup: true
  on:
    # https://docs.travis-ci.com/user/deployment#Conditional-Releases-with-on
    tags: true  # Deploy app only when a tag is applied to the commit
    node: '4'
